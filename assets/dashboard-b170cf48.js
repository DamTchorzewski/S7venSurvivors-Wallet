import{u as N,r as x,j as s,o as y,q as f,t as E,M as S}from"./index-172c72a2.js";const u={},F="/S7venSurvivors-Wallet/assets/pen-e154585a.svg",n={};let j=(a=21)=>crypto.getRandomValues(new Uint8Array(a)).reduce((e,t)=>(t&=63,t<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"");const M=({type:a,onClose:e,id:t,updateDashboard:h})=>{const m=N(),[i,c]=x.useState(),r=l=>{const o=l.target.value.toString(),p=o.substr(8,2),g=o.substr(5,2),v=o.substr(0,4);c({...i,date:{day:p,month:g,year:v},id:t})},d=l=>{l.preventDefault();const o=i.id;m(y({id:o,body:i})),h(i),e()};return s.jsxs("div",{className:n.modalWrapper,children:[s.jsxs("section",{className:n.wrapper,children:[s.jsx("h2",{className:n.header,children:"Edit transaction"}),s.jsxs("div",{className:n.sliderContainer,children:[a==="+"?s.jsx("span",{className:n.greenText,children:"Income"}):s.jsx("span",{className:n.greyText,children:"Income"}),s.jsx("span",{className:n.greyText,children:"/"}),a==="+"?s.jsx("span",{className:n.greyText,children:"Expense"}):s.jsx("span",{className:n.redText,children:"Expense"})]}),s.jsx("form",{onSubmit:d,className:n.Form,children:s.jsx("section",{className:n.modalForm,children:s.jsxs("label",{name:"addTransForm",children:[a==="+"?s.jsx(s.Fragment,{}):s.jsx(SelectMenuModal,{onClick:l=>c({...i,category:l,id:t}),placeholder:"Select a category"}),s.jsxs("div",{className:n.formWrapper,children:[s.jsx("input",{type:"number",name:"sum",onChange:l=>c({...i,sum:l.target.value,id:t}),placeholder:"0.00",className:n.formValue}),s.jsx("input",{type:"date",name:"date",onChange:r,className:n.formDate})]}),s.jsx("input",{type:"text",placeholder:"Comment",name:"comment",onChange:l=>c({...i,comment:l.target.value,id:t}),className:n.formComment}),s.jsx("ul",{className:n.modalList,children:s.jsx("li",{children:s.jsx("button",{className:n.closeButton,onClick:e})})})]})})})]}),s.jsx("div",{className:n.shadow,onClick:e})]})},D=({id:a,type:e,updateDashboard:t})=>{const[h,m]=x.useState(!1),i=()=>{m(!0)},c=r=>{r&&r.preventDefault(),m(!1)};return s.jsxs(s.Fragment,{children:[s.jsx("img",{className:styles.ico,src:F,alt:"edit",onClick:i}),h&&s.jsx(M,{type:e,id:a,onClose:c,updateDashboard:t})]})},T=a=>{const e=parseInt(a.day);return e<10?`0${e}`:e},b=a=>{const e=parseInt(a.month);return e<10?`0${e}`:e},C=a=>a.year.substr(2,2),L=()=>{const{transactions:a,isTransactionsLoading:e}=f(),[t,h]=x.useState([]),m=N();x.useEffect(()=>{m(E())},[m]),x.useEffect(()=>{h(a)},[a]);const i=r=>{h(r)},c=r=>{const d=parseFloat(r),l={useGrouping:!0,minimumFractionDigits:2,maximumFractionDigits:2};return d.toLocaleString("pl-PL",l).replace(/,/g,".")};return s.jsx(s.Fragment,{children:t.length?s.jsx(s.Fragment,{children:s.jsxs("table",{className:u.dashboardClass,children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Date"}),s.jsx("th",{children:"Type"}),s.jsx("th",{children:"Category"}),s.jsx("th",{children:"Comment"}),s.jsx("th",{children:"Sum"}),s.jsx("th",{})]})}),s.jsx("tbody",{className:u.dashboardClassBody,children:t.map(({_id:r,date:d,type:l,category:o,comment:p,sum:g})=>s.jsxs("tr",{children:[s.jsxs("td",{children:[T(d),".",b(d),".",C(d)]}),s.jsx("td",{children:l}),s.jsx("td",{children:o}),s.jsx("td",{children:p}),l=="+"?s.jsx("td",{className:u.green,children:c(g)}):s.jsx("td",{className:u.red,children:c(g)}),s.jsx("td",{children:s.jsx("span",{className:u.buttonContainer,children:s.jsx(D,{id:r,type:l,updateDashboard:i})})})]},r??j()))})]})}):e?null:s.jsx("div",{className:u.dashboardClass,children:s.jsx("h2",{children:"There are no transactions"})})})},w=()=>{const{transactions:a,isTransactionsLoading:e}=f(),[t,h]=x.useState([]),m=N();x.useEffect(()=>{m(E())},[m]),x.useEffect(()=>{h(a)},[a]);const i=c=>{h(c)};return s.jsx(s.Fragment,{children:t.length?s.jsx("div",{className:css.wrapper,children:t.map(({_id:c,date:r,type:d,category:l,comment:o,sum:p})=>s.jsx(s.Fragment,{children:s.jsx("div",{className:css.element,children:s.jsxs("ul",{className:d==="+"?css.greenElementList:css.redElementList,children:[s.jsxs("li",{className:css.listElement,children:[s.jsx("span",{className:css.listElementTitle,children:"Date"}),s.jsxs("span",{children:[T(r),".",b(r),".",C(r)]})]},j()),s.jsxs("li",{className:css.listElement,children:[s.jsx("span",{className:css.listElementTitle,children:"Type"}),s.jsx("span",{children:d})]},j()),s.jsxs("li",{className:css.listElement,children:[s.jsx("span",{className:css.listElementTitle,children:"Category"}),s.jsx("span",{children:l})]},j()),s.jsxs("li",{className:css.listElement,children:[s.jsx("span",{className:css.listElementTitle,children:"Comment"}),s.jsx("span",{children:o.length>15?o.substr(0,15)+"...":o})]},j()),s.jsxs("li",{className:css.listElement,children:[s.jsx("span",{className:css.listElementTitle,children:"Sum"}),s.jsx("span",{className:d==="+"?css.green:css.red,children:p})]},j()),s.jsx("li",{className:css.listElement,children:s.jsxs("ul",{className:css.editList,children:[s.jsx("li",{children:s.jsx(D,{id:c,type:d,updateDashboard:i})}),s.jsx("li",{children:s.jsx("span",{children:"Edit"})})]})},j())]})},c??j())}))}):e?null:s.jsx("h2",{children:"There are no transactions"})})},V=()=>s.jsx(s.Fragment,{children:s.jsx(S,{queries:{small:"(max-width: 768px)",medium:"(min-width: 769px)"},children:a=>s.jsxs(x.Fragment,{children:[a.small&&s.jsx(w,{}),a.medium&&s.jsx(L,{})]})})});export{V as default};
